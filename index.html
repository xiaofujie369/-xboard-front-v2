<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no">
  <title>å¯äº‘ Premium</title>

  <!-- ç™»å½•æˆåŠŸåçš„å…¬å‘Šå¼¹çª—ï¼ˆæ¯æ¬¡ç™»å½•å¼¹ 2 æ¬¡ï¼‰ -->
  <script>
    (function () {
      sessionStorage.removeItem("first_popup_done");
      sessionStorage.removeItem("second_popup_done");

      function popupHTML() {
        return `
        <div class="notice-mask" id="noticePopup">
          <div class="notice-box">
            <div class="notice-close" id="noticeClose">Ã—</div>
            <h2 class="notice-title">ğŸ“¢ æ–°äººå¿…çœ‹å…¬å‘Š</h2>
            <p>æ¬¢è¿æ¥åˆ°å¯äº‘ï¼Œè¯·åŠ¡å¿…é˜…è¯»é¡¶éƒ¨å…¬å‘Šæ ä¿¡æ¯ã€‚</p>
            <p>è¯·ä¿å­˜æˆ‘ä»¬æœ€æ–°åŸŸåï¼š<b>shy521.com</b></p>
            <p>åŠ å…¥ TG ç¾¤ç»„ï¼š<a href="https://t.me/ss_keyun" target="_blank">ç‚¹å‡»åŠ å…¥</a></p>
            <p>ä¸ä¼šä½¿ç”¨ï¼Ÿè¯·æŸ¥çœ‹å·¦ä¾§ã€Œä½¿ç”¨æ–‡æ¡£ã€ã€‚</p>
            <button class="notice-btn" id="noticeBtn">æˆ‘å·²çŸ¥æ™“</button>
          </div>
        </div>`;
      }

      function showPopup() {
        document.body.insertAdjacentHTML("beforeend", popupHTML());
        const close = () => document.getElementById("noticePopup")?.remove();
        document.getElementById("noticeClose").onclick = close;
        document.getElementById("noticeBtn").onclick = close;
      }

      function dashboardReady() {
        const t = document.body.innerText;
        return t.includes("å¥—é¤") || t.includes("ä»ªè¡¨ç›˜") || t.includes("é¦–é¡µ");
      }

      function beginPopupProcess() {
        if (!sessionStorage.getItem("first_popup_done")) {
          showPopup();
          sessionStorage.setItem("first_popup_done", "1");
        }

        if (!sessionStorage.getItem("second_popup_done")) {
          const waitFirstClose = setInterval(() => {
            if (!document.getElementById("noticePopup")) {
              clearInterval(waitFirstClose);
              let clicked = false;
              const clickListener = () => {
                if (!clicked) {
                  clicked = true;
                  const delay = 3000 + Math.random() * 7000;
                  setTimeout(() => {
                    showPopup();
                    sessionStorage.setItem("second_popup_done", "1");
                  }, delay);
                }
              };
              document.addEventListener("click", clickListener, { once: true });
              setTimeout(() => document.removeEventListener("click", clickListener), 60000);
            }
          }, 300);
        }
      }

      let checkCount = 0;
      const checkLogin = setInterval(() => {
        if (dashboardReady()) {
          clearInterval(checkLogin);
          beginPopupProcess();
        }
        if (++checkCount > 80) clearInterval(checkLogin);
      }, 400);
    })();
  </script>

  <!-- å•†åŠ¡é£å¢å¼ºæ ·å¼ -->
  <style>
    .ky-premium-collapse-wrapper {
      max-height: 120px;
      overflow: hidden;
      transition: max-height 0.4s ease;
    }
    .ky-premium-collapse-wrapper.open {
      max-height: 800px;
    }
    .ky-premium-btn {
      margin-top: 8px;
      text-align: center;
      font-size: 13px;
      color: #ff6fa8;
      cursor: pointer;
      user-select: none;
    }
    .notice-mask {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.45);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }
    .notice-box {
      background: #fff;
      border-radius: 16px;
      padding: 24px;
      width: 85%;
      max-width: 400px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
      text-align: center;
      position: relative;
      font-family: "Helvetica Neue", "PingFang SC", sans-serif;
    }
    .notice-close {
      position: absolute;
      right: 14px;
      top: 10px;
      cursor: pointer;
      font-size: 18px;
      color: #999;
    }
    .notice-title {
      margin-bottom: 12px;
      color: #ff6fa8;
    }
    .notice-btn {
      background: linear-gradient(135deg, #ff85c1, #ff6fa8);
      border: none;
      border-radius: 8px;
      padding: 8px 20px;
      color: #fff;
      cursor: pointer;
      margin-top: 10px;
    }
    .notice-btn:hover {
      opacity: 0.9;
    }
  </style>
</head>
<body>
  <div id="app"></div>

  <!-- æ‰‹æœºç«¯å¢å¼ºè„šæœ¬ï¼šå•†å“è¯¦æƒ…æŠ˜å  -->
  <script>
    (function () {
      console.log("å¯äº‘ Premium å•†åŠ¡é£å¢å¼º loaded");
      function waitForPlans() {
        const cards = document.querySelectorAll(".ant-card-body, .n-card__content");
        if (cards.length === 0) {
          requestAnimationFrame(waitForPlans);
          return;
        }
        enhance(cards);
      }
      function enhance(cards) {
        cards.forEach((card) => {
          if (card.dataset.enhanced === "1") return;
          const blocks = Array.from(card.querySelectorAll("li, p, div"));
          if (blocks.length < 4) return;
          const wrapper = document.createElement("div");
          wrapper.className = "ky-premium-collapse-wrapper";
          const inner = document.createElement("div");
          inner.className = "ky-premium-inner-block";
          blocks.forEach((b) => inner.appendChild(b.cloneNode(true)));
          wrapper.appendChild(inner);
          blocks.forEach((b) => b.remove());
          card.prepend(wrapper);
          const btn = document.createElement("div");
          btn.className = "ky-premium-btn";
          btn.innerText = "å±•å¼€è¯¦æƒ… â–¼";
          let expanded = false;
          btn.onclick = () => {
            expanded = !expanded;
            if (expanded) {
              wrapper.classList.add("open");
              btn.innerText = "æ”¶èµ·è¯¦æƒ… â–²";
            } else {
              wrapper.classList.remove("open");
              btn.innerText = "å±•å¼€è¯¦æƒ… â–¼";
            }
          };
          card.appendChild(btn);
          card.dataset.enhanced = "1";
        });
      }
      waitForPlans();
    })();
  </script>
</body>
</html>
